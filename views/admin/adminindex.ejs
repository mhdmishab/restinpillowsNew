<%- include ('../admin/layout/adminheader.ejs') %>
  <!-- End of Topbar -->
  <!-- <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
                        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                                class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>
                    </div> -->


  <body>

    <div style="margin-top: 5rem;" class="col py-3">

      <div class="container">
        <div class="justify-content-center">
          <h2>Dashboard</h2>
        </div>
        <div class="d-flex align-items-center justify-content-between ">

          <div class="shadow p-3 mb-3  rounded bg-white" style="height: 90px;width: 325px;">

            <div class="d-flex align-items-center justify-content-center">
              <h6 class="text-info">Today's Revenue</h6>
            </div>
            <div class="d-flex align-items-center justify-content-center">
              <h2 id="todayRevenue"><%=todayRevenue %>
              </h2>
            </div>

          </div>

          <div class=" shadow p-3 mb-3  rounded bg-white" style="height: 90px;width: 325px;">

            <div class="d-flex align-items-center justify-content-center">
              <h6 class="text-info">monthly Revenue</h6>
            </div>
            <div class="d-flex align-items-center justify-content-center">
              <h2 id="monthlyRevenue"><%=monthlyRevenue %>
              </h2>
            </div>

          </div>

          <div class=" shadow p-3 mb-3  rounded bg-white" style="height: 90px;width: 325px;">

            <div class="d-flex align-items-center justify-content-center">
              <h6 class="text-info">Total Revenue</h6>
            </div>
            <div class="d-flex align-items-center justify-content-center">
              <h2 id="totalRevenue"><%=totalRevenue %>
              </h2>
            </div>


          </div>

        </div>

        <div class="d-flex align-items-center justify-content-between ">

          <div class="shadow p-3 mb-3  rounded bg-white" style="height: 90px;width: 325px;">

            <div class="d-flex align-items-center justify-content-center">
              <h6 class="text-info">Total orders</h6>
            </div>
            <div class="d-flex align-items-center justify-content-center">
              <h2 class="">
                <%= allOrders %>
              </h2>
            </div>

          </div>

          <div class=" shadow p-3 mb-3  rounded bg-white" style="height: 90px;width: 325px;">

            <div class="d-flex align-items-center justify-content-center">
              <h6 class="text-info">Active users</h6>
            </div>
            <div class="d-flex align-items-center justify-content-center">
              <h2 class="">
                <%=activeUsers %>
              </h2>
            </div>

          </div>

          <div class=" shadow p-3 mb-3  rounded bg-white" style="height: 90px;width: 325px;">

            <div class="d-flex align-items-center justify-content-center">
              <h6 class="text-info">Number of products</h6>
            </div>
            <div class="d-flex align-items-center justify-content-center">
              <h2 class="">
                <%=product %>
              </h2>
            </div>


          </div>

        </div>


        <div class="d-flex align-items-center justify-content-between ">


          <div class=" shadow p-3 m-2   rounded bg-white" style="height: 90px;width: 244px;">
            <h6 class="text-info">Pending orders</h6>
            <h4 id="pending">
              <%= pending %>
            </h4>

          </div>

          <div class=" shadow p-3 m-2   rounded bg-white" style="height: 90px;width: 244px;">
            <h6 class="text-info">Shippped orders </h6>
            <h4 id="shipped">
              <%= shipped %>
            </h4>

          </div>

          <div class=" shadow p-3 m-2   rounded bg-white" style="height: 90px;width: 244px;">
            <h6 class="text-info">placed Orders </h6>
            <h4 id="placed">
              <%= placed %>
            </h4>

          </div>


          <div class=" shadow p-3 m-2   rounded bg-white" style="height: 90px;width: 244px;">
            <h6 class="text-info">Cancelled orders </h6>
            <h4 id="cancelled">
              <%= cancelled %>
            </h4>

          </div>

          <div class=" shadow p-3 m-2   rounded bg-white" style="height: 90px;width: 244px;">
            <h6 class="text-info">Online orders </h6>
            <h4 id="online">
              <%= online %>
            </h4>

          </div>
          <div class=" shadow p-3 m-2   rounded bg-white" style="height: 90px;width: 244px;">
            <h6 class="text-info">COD orders </h6>
            <h4 id="cod">
              <%= cod %>
            </h4>

          </div>

        </div>


      </div>


      <div class="mt-5">
        <div class="row">

          <div class="col-xl-6 col-12 ms-5">
            <canvas id="salesRevenue"></canvas>
          </div>
          <div class="col-xl-6 col-12 ms-5">
            <canvas id="TypesofOrders"></canvas>
          </div>
          <div class="col-xl-6 col-12 ms-5">
            <canvas id="paymentMethod"></canvas>
          </div>

        </div>

      </div>


    </div>
    </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

    <script>
      let pending = parseInt(document.getElementById("pending").innerHTML);
      let shipped = parseInt(document.getElementById("shipped").innerHTML);
      let placed = parseInt(document.getElementById("placed").innerHTML);
      let cancelled = parseInt(document.getElementById("cancelled").innerHTML);


      var myChart5 = new Chart("TypesofOrders", {
        type: "bar",
        data: {
          labels: ["Pending", "Shipped", "placed", 'cancelled'],
          datasets: [
            {
              label: "Types Of Orders",
              backgroundColor: ["#C2C9C8", "#0B6464", "#515454", "#3E5A5A"],
              data: [pending, shipped, placed, cancelled],
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true, // start Y-axis from zero
                 // set the step size for the Y-axis values
              },
            }],
          },
        },
      });

      // myChart5.options.scales.yAxes.ticks.stepSize = 1;

      let todayRevenue = parseInt(document.getElementById("todayRevenue").innerHTML);
      let monthlyRevenue = parseInt(document.getElementById("monthlyRevenue").innerHTML);
      let totalRevenue = parseInt(document.getElementById("totalRevenue").innerHTML);


      var ctx = document.getElementById('salesRevenue').getContext('2d');
      var myChart3 = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["Today Revenue", "Monthly Revenue", "Total Revenue"],
          datasets: [{
            label: 'Sales Revenue',
            data: [todayRevenue, monthlyRevenue, totalRevenue],
            backgroundColor: ["#C2C9C8", "#515454", "#0B6464"]
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true,
               
              }
            }],
            
          }
        }
      });



      let cod = parseInt(document.getElementById("cod").innerHTML);
      let online = parseInt(document.getElementById("online").innerHTML);


      var ctx = document.getElementById('paymentMethod').getContext('2d');
      var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["COD", "Online"],
          datasets: [{
            label: 'Payment Method',
            data: [cod, online],
            backgroundColor: ["#C2C9C8", "#515454"]
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true,
                stepSize: 1
              }
            }]
          }
        }
      });
    </script>


    <script>
      $("#menu-btn").click(function () {
        $("#menu").toggleClass("active");
      });
    </script>
    <%- include('../admin/layout/adminscripts.ejs') %>

  </body>

  <!-- Footer -->