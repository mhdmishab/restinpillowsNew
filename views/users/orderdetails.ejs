<%- include ('../users/layout/header.ejs') %>
    <div style="height: 8rem; width: 100%;"></div>

    <% if (productData.length>0) { %>

        <section class="h-100 gradient-custom mb-5">
            <div class="container py-5 h-100">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-lg-10 col-xl-8">
                        <div class="card" style="border-radius: 10px;">
                            <div class="card-header px-4 py-5">
                                <h5 class="text-muted mb-0">Thanks for your Order, <span style="color: #a8729a;">
                                        <%=productData[0]?.name%>
                                    </span>!</h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <p class="lead fw-normal mb-0" style="color: #a8729a;">All orders</p>
                                    <p class="small text-muted mb-0">restinpillows</p>
                                </div>
                                <% productData.forEach((product)=>{ %>
                                    <div class="card shadow-0 border mb-4">
                                        <div class="card-body">
                                            <div class="row">

                                                <div class="col-md-2">

                                                    <img src="/<%= product.productDetail.image1 %>" class="img-fluid"
                                                        alt="Phone">
                                                    <a href="/orderedProduct/<%= product._id %>"
                                                        style="text-decoration: #a8729a; ">Track </a>
                                                </div>
                                                <div
                                                    class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                                    <p class="text-muted mb-0">
                                                        <%=product.productDetail.productname%>
                                                    </p>
                                                </div>
                                                <div
                                                    class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                                    <p class="text-muted mb-0 small">
                                                        <%= product.category_name.categoryname %>
                                                    </p>
                                                </div>


                                                <div
                                                    class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                                    <p class="text-muted mb-0 small">payment: <%= product.paymentMethod
                                                            %>
                                                    </p>
                                                </div>
                                                <div
                                                    class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                                    <p class="text-muted mb-0 small">
                                                        <% if(product.orderStatus=='placed'
                                                            ||product.orderStatus=='pending'
                                                            ||product.orderStatus=='Shipped'
                                                            ||product.orderStatus=='outForDelivery' ){ %>
                                                            <a data-bs-toggle="modal" class="btn btn-outline-danger"
                                                                data-bs-target="#exampleModal-<%=product._id%>">
                                                                Cancel
                                                            </a>
                                                            <% }else{%>
                                                                <b>Order Cancelled</b>
                                                                <% } %>
                                                                    <!-- Modal -->
                                                                    <div class="modal fade  modal-centered"
                                                                        id="exampleModal-<%=product._id%>" tabindex="-1"
                                                                        aria-labelledby="exampleModalLabel">
                                                                        <div class="modal-dialog modal-dialog-centered">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h1 class="modal-title fs-5"
                                                                                        id="exampleModalLabel">Delete
                                                                                        confirmation</h1>
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    Are you sure you want to cancel this
                                                                                    order ?
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-bs-dismiss="modal">Close</button>
                                                                                    <a
                                                                                        href="/cancelOrder/<%=product._id%>"><button
                                                                                            type="button"
                                                                                            class="btn btn-danger">Cancel</button></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                    </p>
                                                </div>
                                                <div
                                                    class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                                    <p class="text-muted mb-0 small"></p>
                                                </div>

                                            </div>
                                            <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">
                                            <div class="row d-flex align-items-center">
                                                <div class="col-md-2">
                                                    <p class="text-muted mb-0 small">Total Amount:<%=
                                                            product.totalAmount%>
                                                    </p>
                                                </div>
                                                <div class="col-md-10">
                                                    <!-- <div class="progress" style="height: 6px; border-radius: 16px;">
                                                        <div class="progress-bar" role="progressbar"
                                                        style="width: 65%; border-radius: 16px; background-color: #a8729a;" aria-valuenow="65"
                                                            aria-valuemin="0" aria-valuemax="100"></div>
                                                </div> -->
                                                    <div class="d-flex justify-content-right">

                                                        <p class="text-muted mt-1 mb-0 small ms-xl-5">status :
                                                            <%=product.paymentStatus%>
                                                        </p>
                                                        <p class="text-muted mt-1 ml-5 mb-0 small ms-xl-5">Order Date :
                                                            <%=product.orderDate%>
                                                        </p>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <% }) %>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <% } else { %>

            <div class="u-unfold u-unfold--cart text-center border rounded-0 right-0 p-5 m-5">
                <span style="width:300px;height:300px" class="u-icon u-icon--primary u-icon--md rounded-circle mb-3">
                    <span class="fa-brands fa-10x fa-shopify"></span>
                </span>
                <h2 class="d-block m-3">No Orders Yet</h2>
                <a href="/getshop" class="btn btn-primary">Shop Now</a>
            </div>
        <% } %>
    



        <div style="height: 4rem; width: 100%;"></div>

        <%- include ('../users/layout/script.ejs') %>